use collections.map
use env

type Event.Start = {}

sector Profile:
  on Event.Start -> do:
    let e0 = envEmpty()
    let e1 = envSet(e0, "REGION", "us-east-1")
    let e2 = envSet(e0, "MODE", "prod")
    let merged = match e1:
      Err(_) -> e0
      Ok(v1) -> match e2:
        Err(_) -> v1
        Ok(v2) -> mapMerge(v1, v2)
    let mode = envGetOr(merged, "MODE", "dev")
    let region = envGet(merged, "REGION")
    mode
    region
    stop()

run()
